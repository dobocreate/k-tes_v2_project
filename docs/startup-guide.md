# ãƒˆãƒ³ãƒãƒ«åœ°å±±è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ  - èµ·å‹•ã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒˆãƒ³ãƒãƒ«åœ°å±±è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã‚ã‚Šã¾ã™ï¼š
```
/mnt/c/users/kishida/cursorproject/k-tes_v2_project
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
/mnt/c/users/kishida/cursorproject/k-tes_v2_project/
â”œâ”€â”€ core/                    # Core API
â”‚   â”œâ”€â”€ tunnel_core_api.py   # APIãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ requirements.txt     # APIä¾å­˜é–¢ä¿‚
â”‚   â””â”€â”€ models/             # ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®å ´æ‰€
â”œâ”€â”€ frontend/               # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ simple_dashboard.py  # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ requirements.txt    # UIä¾å­˜é–¢ä¿‚
â”œâ”€â”€ docs/                   # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â””â”€â”€ startup-guide.md    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ .venv/                  # Pythonä»®æƒ³ç’°å¢ƒ
â”œâ”€â”€ start_system.sh         # Linux/Macç”¨èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ start_system.bat        # Windowsç”¨èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## ğŸ“‹ å‰ææ¡ä»¶

- Python 3.9ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- ä¸Šè¨˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€2ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š
1. Core APIï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
2. Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: Core APIã®èµ·å‹•

æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /mnt/c/users/kishida/cursorproject/k-tes_v2_project

# ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# Core APIã‚’èµ·å‹•
cd core
python tunnel_core_api.py
```

**èµ·å‹•æˆåŠŸæ™‚ã®è¡¨ç¤ºï¼š**
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started server process [...]
INFO:     Application startup complete.
```

### ã‚¹ãƒ†ãƒƒãƒ—2: Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®èµ·å‹•

åˆ¥ã®æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /mnt/c/users/kishida/cursorproject/k-tes_v2_project

# ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’èµ·å‹•
streamlit run frontend/simple_dashboard.py
```

**èµ·å‹•æˆåŠŸæ™‚ã®è¡¨ç¤ºï¼š**
```
  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://xxx.xxx.xxx.xxx:8501
```

## ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

ä¸¡æ–¹ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ãŸã‚‰ã€ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: http://localhost:8501
- **API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: http://localhost:8000/docs

## ğŸ”§ è©³ç´°ãªèµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³

### Core APIã®èµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### æ¨™æº–èµ·å‹•
```bash
python tunnel_core_api.py
```

#### ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆã§èµ·å‹•
```bash
# ãƒãƒ¼ãƒˆ8001ã§èµ·å‹•
uvicorn tunnel_core_api:app --port 8001 --reload
```

#### ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã—ãŸèµ·å‹•
```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã„ã‚‹å ´åˆ
API_PORT=8001 python tunnel_core_api.py
```

### Streamlitãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®èµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### æ¨™æº–èµ·å‹•
```bash
streamlit run frontend/simple_dashboard.py
```

#### ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆã§èµ·å‹•
```bash
streamlit run frontend/simple_dashboard.py --server.port 8502
```

#### WSLç’°å¢ƒã§ã®èµ·å‹•
```bash
# å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã‚‹
streamlit run frontend/simple_dashboard.py --server.address 0.0.0.0
```

#### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
```bash
streamlit run frontend/simple_dashboard.py --logger.level debug
```

## ğŸ“ èµ·å‹•ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

1. **ä»®æƒ³ç’°å¢ƒã®ç¢ºèª**
   ```bash
   which python  # ä»®æƒ³ç’°å¢ƒã®Pythonãƒ‘ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   ```

2. **ä¾å­˜é–¢ä¿‚ã®ç¢ºèª**
   ```bash
   pip list | grep -E "fastapi|streamlit|pandas"
   ```

3. **ãƒãƒ¼ãƒˆã®ç¢ºèª**
   ```bash
   # Linux/Mac
   lsof -i :8000
   lsof -i :8501
   
   # Windows
   netstat -an | findstr :8000
   netstat -an | findstr :8501
   ```

## ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ ã®å†èµ·å‹•

### Core APIã®å†èµ·å‹•
1. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `Ctrl+C` ã‚’æŠ¼ã—ã¦APIã‚’åœæ­¢
2. å†åº¦ `python tunnel_core_api.py` ã‚’å®Ÿè¡Œ

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å†èµ·å‹•
1. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `Ctrl+C` ã‚’æŠ¼ã—ã¦Streamlitã‚’åœæ­¢
2. å†åº¦ `streamlit run frontend/simple_dashboard.py` ã‚’å®Ÿè¡Œ

## ğŸ”Œ APIæ¥ç¶šã®ç¢ºèª

1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆhttp://localhost:8501ï¼‰
2. å·¦å´ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€ŒAPI URLã€ã‚’ç¢ºèª
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `http://localhost:8000`
   - ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆä½¿ç”¨æ™‚: `http://localhost:8001`
3. ã€ŒğŸ”„ APIæ¥ç¶šç¢ºèªã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã€Œâœ… APIæ¥ç¶š: HEALTHYã€ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸ

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### "Module not found" ã‚¨ãƒ©ãƒ¼
```bash
# ä»®æƒ³ç’°å¢ƒãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
source .venv/bin/activate

# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r core/requirements.txt
pip install -r frontend/requirements.txt
```

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­
```bash
# åˆ¥ã®ãƒãƒ¼ãƒˆã§èµ·å‹•
# API
uvicorn tunnel_core_api:app --port 8001

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
streamlit run frontend/simple_dashboard.py --server.port 8502
```

### APIæ¥ç¶šã‚¨ãƒ©ãƒ¼
1. Core APIãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
2. API URLãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆãƒãƒ¼ãƒˆç•ªå·ã‚’å«ã‚€ï¼‰
3. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãŒãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ãªã„ã‹ç¢ºèª

### ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®è­¦å‘Š
```
WARNING - Model file not found at models/lightgbm_model_optimized.pkl
```
ã“ã‚Œã¯æ­£å¸¸ãªè­¦å‘Šã§ã™ã€‚ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã¯ä»¥ä¸‹ã«é…ç½®ï¼š
```bash
# ä¾‹: ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ã‚ã‚‹å ´åˆ
cp /mnt/c/users/kishida/Desktop/lightgbm_model_optimized.pkl /mnt/c/users/kishida/cursorproject/k-tes_v2_project/core/models/

# ã¾ãŸã¯ã€ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ç›¸å¯¾ãƒ‘ã‚¹ã§
cd /mnt/c/users/kishida/cursorproject/k-tes_v2_project
cp ../path/to/lightgbm_model_optimized.pkl core/models/
```

## ğŸ“Š ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨ãƒ•ãƒ­ãƒ¼
1. ä¸¡ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹
3. APIæ¥ç¶šã‚’ç¢ºèª
4. Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
5. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š
6. äºˆæ¸¬ã‚’å®Ÿè¡Œï¼ˆãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ï¼‰

### é–‹ç™ºæ™‚ã®æ¨å¥¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: Core APIï¼ˆè‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰æœ‰åŠ¹ï¼‰
cd core && uvicorn tunnel_core_api:app --reload

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: Streamlit
streamlit run frontend/simple_dashboard.py

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«3: é–‹ç™ºä½œæ¥­ç”¨
# ã‚³ãƒ¼ãƒ‰ç·¨é›†ã€Gitæ“ä½œãªã©
```

## ğŸ›‘ ã‚·ã‚¹ãƒ†ãƒ ã®åœæ­¢

1. å„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `Ctrl+C` ã‚’æŠ¼ã—ã¦ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢
2. ä»®æƒ³ç’°å¢ƒã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å ´åˆ: `deactivate`

---

æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´1æœˆ16æ—¥